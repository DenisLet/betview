<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Как это работает — Goals Explorer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <style>
    .wrap{max-width:980px;margin:0 auto;padding:20px;}
    .back{display:inline-block;margin-bottom:20px;color:#9ecbff;text-decoration:none;border:1px solid #253048;padding:6px 10px;border-radius:8px;}
    .card{padding:18px 18px 2px;}
    h1{margin:4px 0 14px;}
    h2{margin:18px 0 8px;}
    h3{margin:12px 0 6px;}
    .muted{color:#9aa3b2;}
    .pill-demo{display:inline-block;border:1px solid #253048;border-radius:999px;padding:4px 10px;margin-right:6px;background:#0f1116;}
    .toc a{color:#cfd3dc;text-decoration:none;}
    .toc li{margin:6px 0;}
    code {background:#0e1420;border:1px solid #1e2737;border-radius:6px;padding:2px 6px;}
    .block{background:#0f1116;border:1px solid #1e2737;border-radius:12px;padding:12px;margin:10px 0;}
    .good{color:#7ee787} .bad{color:#f88a8a}
  </style>
</head>
<body>
<div class="wrap">
  <a class="back" href="/" target="_self">← Назад к графикам</a>
  <h1>Как это работает</h1>

  <div class="card">
    <p class="muted">Эта страница объясняет простыми словами, что означают прогнозы на графиках и на каких принципах они строятся. Никакой высшей математики — только смысл и практические советы.</p>
  </div>

  <div class="card">
    <h2>Оглавление</h2>
    <ul class="toc">
      <li><a href="#metrics">Метрики на графиках</a></li>
      <li><a href="#modes">Фильтр «Дом/Выезд»</a></li>
      <li><a href="#prog">▲ prog — паттерны последних матчей</a></li>
      <li><a href="#kprog">◆ kprog — “похожие окна” (ядро)</a></li>
      <li><a href="#bprog">★ bprog — Байесовское ожидание по лиге</a></li>
      <li><a href="#sprog">◈ sprog — модель Dixon–Coles (бек)</a></li>
      <li><a href="#tips">Как интерпретировать и комбинировать</a></li>
      <li><a href="#faq">FAQ</a></li>
    </ul>
  </div>

  <div id="metrics" class="card">
    <h2>Метрики на графиках</h2>
    <div class="block">
      <p><b>Всего в матче (GF+GA)</b> — сколько голов в сумме в матче команды (забитые + пропущенные).</p>
      <p><b>Забитые (GF)</b> — голы, забитые этой командой.</p>
      <p><b>Пропущенные (GA)</b> — голы, пропущенные этой командой.</p>
      <p class="muted">Точки — отдельные матчи. Линии «медиана/среднее» по сезону помогают оценить типичный уровень.</p>
    </div>
  </div>

  <div id="modes" class="card">
    <h2>Фильтр «Дом/Выезд»</h2>
    <p>В верхней панели можно выбрать режим:</p>
    <span class="pill-demo">Все</span>
    <span class="pill-demo">Дом</span>
    <span class="pill-demo">Выезд</span>
    <p class="muted">Это просто отбор матчей при расчётах и на графиках. Например, «Дом» учитывает только домашние игры — прогнозы тоже считаются только по ним.</p>
  </div>

  <div id="prog" class="card">
    <h2>▲ prog — паттерны последних матчей</h2>
    <div class="block">
      <p><bИдея:</b> смотрим на последние <code>K</code> матчей команды (например, два — «2») и ищем в прошлых сезонах такие же (или похожие) подряд идущие значения метрики. Что случалось в следующем матче после подобных отрезков? Это и есть прогноз.</p>
      <p><b>Параметры:</b> «Паттерн» = длина окна <code>K</code> (2 или 3). «Допуск похожести» = строго совпадение (<code>±0</code>) или допускаем ±1 от значения (<code>±1</code>).</p>
      <p><b>Плюсы:</b> учитывает конкретную «форму» команды. <br><b>Минусы:</b> если история бедная, подход может “молчать”.</p>
    </div>
  </div>

  <div id="kprog" class="card">
    <h2>◆ kprog — “похожие окна” (ядро)</h2>
    <div class="block">
      <p><b>Идея:</b> берём последние <code>k</code> матчей, и сравниваем их со <i>всеми</i> скользящими окнами в истории. Чем окно ближе по значениям, тем больший вес оно получает (гауссово ядро). Прогноз — средневзвешенное «следующее» значение.</p>
      <p><b>Параметры:</b> ширина ядра зависит от выбранной метрики и «допуска похожести».</p>
      <p><b>Плюсы:</b> устойчивее к шуму, чем строгое совпадение. <br><b>Минусы:</b> может «размазывать» локальные эффекты.</p>
    </div>
  </div>

  <div id="bprog" class="card">
    <h2>★ bprog — Байесовское ожидание по лиге</h2>
    <div class="block">
      <p><b>Идея:</b> предполагаем, что голы распределены примерно как Пуассон. Для параметра λ используем байесовскую оценку с гамма-приором, который строим на всей лиге. То есть «умное среднее», учитывающее и команду, и общее распределение по лиге.</p>
      <p><b>Плюсы:</b> стабильно на коротких выборках. <br><b>Минусы:</b> сглаживает индивидуальные всплески формы.</p>
    </div>
  </div>

  <div id="sprog" class="card">
    <h2>◈ sprog — Dixon–Coles с затуханием (бек)</h2>
    <div class="block">
      <p><b>Идея:</b> на бэке оцениваем «силы атаки/обороны» всех команд лиги и «домашний бонус» через модифицированную Пуассон-модель Dixon–Coles. Недавние матчи получают больший вес (экспоненциальное затухание по времени), а очень низкие счёты корректируются специальным коэффициентом.</p>
      <p><b>На графике:</b> показываем три ожидания — <code>GF</code>, <code>GA</code> и их сумму (<code>total</code>) для выбранного режима (все/дом/выезд).</p>
      <p><b>Плюсы:</b> учитывает силу соперников и тренды по времени. <br><b>Минусы:</b> сложнее и тяжелее; иногда «пересиливает» свежую форму.</p>
    </div>
  </div>

  <div id="tips" class="card">
    <h2>Как интерпретировать и комбинировать</h2>
    <div class="block">
      <ul>
        <li><b>Согласие нескольких методов</b> = сильнее сигнал. Например, если ▲, ◆ и ★ дают ~2.6 для тотала, а ◈ тоже близко — это хороший консенсус.</li>
        <li><b>Дом/Выезд</b>: переключайте режим — иногда дома и в гостях картина кардинально разная.</li>
        <li><b>Медиана/Среднее</b> сезона — быстрый «якорь» для проверки адекватности прогноза.</li>
        <li><b>Разброс</b>: у ◈ есть грубая оценка разброса для тотала (±1σ). Чем больше σ, тем осторожнее выводы.</li>
      </ul>
    </div>
  </div>

  <div id="faq" class="card">
    <h2>FAQ</h2>
    <div class="block">
      <h3>Эти прогнозы «точные»?</h3>
      <p>Это <b>оценки ожиданий</b>, а не гарантии исходов. Их цель — дать ориентир: где примерно находится «центр тяжести» возможных значений.</p>
      <h3>Почему методы расходятся?</h3>
      <p>Они подсвечивают разные аспекты: форма (▲/◆), уровень лиги (★), структурная сила с учётом соперников и времени (◈). Разброс — нормален.</p>
      <h3>Что выбирать?</h3>
      <p>Берите консенсус и контекст игры. Если методы резко не согласны — это сигнал копнуть глубже (склады, травмы, ротации и т.д.).</p>
    </div>
  </div>

  <p class="muted" style="margin-top:18px;">Если нужна ещё одна метрика/модель — дайте знать, добавим.</p>
</div>
</body>
</html>
